<idea-plugin>
    <id>com.reedelk.plugin</id>
    <name>Reedelk ESB</name>
    <vendor email="info@reedelk.com" url="http://www.reedelk.com">Reedelk</vendor>

    <description>
        <![CDATA[
    <p>1.0.0-SNAPSHOT</p>
    <ul>
        <li>First Release</li>
    </ul>
    <p>1.0.0-SNAPSHOT</p>
    <ul>
        <li>First Release</li>
    </ul>
    ]]>
    </description>

    <depends>com.intellij.modules.lang</depends>
    <depends>org.jetbrains.idea.maven</depends>

    <extensions defaultExtensionNs="com.intellij">

        <!-- File Type -->
        <fileTypeFactory implementation="com.reedelk.plugin.filetype.FlowFileTypeFactory"/>
        <fileTypeFactory implementation="com.reedelk.plugin.filetype.SubFlowFileTypeFactory"/>
        <fileTypeFactory implementation="com.reedelk.plugin.filetype.FlowConfigFileTypeFactory"/>

        <!-- File Editor -->
        <fileEditorProvider implementation="com.reedelk.plugin.editor.FlowDesignerEditorProvider"/>
        <fileEditorProvider implementation="com.reedelk.plugin.editor.SubFlowDesignerEditorProvider"/>

        <!-- File Templates -->
        <internalFileTemplate name="Maven Module"/>
        <internalFileTemplate name="Maven Project"/>

        <stepsBeforeRunProvider
                implementation="com.reedelk.plugin.runconfig.module.beforetask.ModuelBuilderBeforeTaskProvider"/>

        <!-- Module Builder -->
        <moduleBuilder builderClass="com.reedelk.plugin.builder.ModuleBuilder" id="ESB_MODULE_BUILDER"
                       order="first"/>

        <!-- Services -->
        <applicationService serviceInterface="com.reedelk.plugin.service.application.http.HttpService"
                            serviceImplementation="com.reedelk.plugin.service.application.http.impl.HttpServiceImpl"/>

        <projectService serviceInterface="com.reedelk.plugin.service.project.ToolWindowService"
                        serviceImplementation="com.reedelk.plugin.service.project.impl.ToolWindowServiceImpl"/>

        <moduleService serviceInterface="com.reedelk.plugin.service.module.ComponentService"
                       serviceImplementation="com.reedelk.plugin.service.module.impl.ComponentServiceImpl"/>

        <moduleService serviceInterface="com.reedelk.plugin.service.module.SubflowService"
                       serviceImplementation="com.reedelk.plugin.service.module.impl.SubflowServiceImpl"/>

        <moduleService serviceInterface="com.reedelk.plugin.service.module.ConfigService"
                       serviceImplementation="com.reedelk.plugin.service.module.impl.ConfigServiceImpl"/>

        <!-- Program Runner and Executors -->
        <programRunner implementation="com.reedelk.plugin.runconfig.module.runner.DeploymentRunner" order="first"/>
        <executor implementation="com.reedelk.plugin.runconfig.module.runner.ModuleDeployExecutor"/>
        <executor implementation="com.reedelk.plugin.runconfig.module.runner.ModuleUnDeployExecutor"/>


        <!-- Run Configurations -->
        <configurationType implementation="com.reedelk.plugin.runconfig.runtime.RuntimeRunConfigurationType"/>
        <configurationType implementation="com.reedelk.plugin.runconfig.module.ModuleRunConfigurationType"/>

        <!-- Palette and Component properties tool window -->
        <toolWindow id="ESB Components" anchor="right" icon="/icons/icon-16x-blue.png"
                    factoryClass="com.reedelk.plugin.editor.palette.PaletteFactory"/>

        <toolWindow id="componentPropertiesToolWindow" anchor="bottom"
                    factoryClass="com.reedelk.plugin.editor.properties.PropertiesPanelToolWindowFactory"/>

    </extensions>

    <actions>
        <action id="Reedelk.CreateProjectFile" class="com.reedelk.plugin.action.CreateProjectFile">
            <add-to-group group-id="NewGroup1" anchor="after" relative-to-action="NewClass"/>
        </action>
    </actions>

    <project-components>
        <component>
            <interface-class>com.reedelk.plugin.service.project.SourceChangeService</interface-class>
            <implementation-class>com.reedelk.plugin.service.project.impl.SourceChangeServiceImpl</implementation-class>
        </component>
        <component>
            <interface-class>com.reedelk.plugin.service.project.DesignerSelectionManager</interface-class>
            <implementation-class>com.reedelk.plugin.service.project.impl.DesignerSelectionManagerImpl
            </implementation-class>
        </component>
    </project-components>

</idea-plugin>